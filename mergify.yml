pull_request_rules:
  - name: label feature branches
    conditions:
      - head~=^feature/
    actions:
      label:
        add: [feature]

  - name: label bugfix branches
    conditions:
      - head~=^fix/
    actions:
      label:
        add: [fix]

  - name: automatic rebase
    conditions:
      - base=main
      - "#commits-behind>0"
    actions:
      rebase: {}

  - name: auto merge when ready
    conditions:
      - base=main
      - author!=mergify[bot]
      # --- required checks (MUST match GitHub check names exactly) ---
      - check-success=SonarCloud Code Analysis
      - check-sucess=required

      # Kernel CI is usually "kernel-ci / <job name>" for GitHub Actions.
      # Use a regex so you don't care what the job is called.

      # --- review requirements ---
      - "#approved-reviews-by>=1"
      - -draft
    actions:
      queue:
        name: default
        method: squash
